{{#if:{{#urlget:mailbox}} | | This article is meant to be accessed with a dynamic url }}
__NOTOC__
<templatestyles src="ContactManager:Styles.css" />
<big>
{{#invoke:ContactManager/ConversationsNavigation|fn|mailbox={{#urlget:mailbox}}|hash={{#urlget:hash}}|month={{#urlget:month}}|year={{#urlget:year}}|show={{#urlget:show}} }}
</big>


{{ContactManager/Conversation buttons|mailbox={{#urlget:mailbox}}|hash={{#urlget:hash}}|id={{#urlget:id}}|month={{#urlget:month}}|year={{#urlget:year}} }}


===Participants===
{{#visualdataquery:[[conversations::{{#urlget:hash}}]]
|schema=ContactManager/Contact
|?full_name=name
|?email=email addresses
|?seen_since=seen since
|?seen_until=seen until
|pagetitle=
|template?full_name=ContactManager/Conversation field full name
|format=datatables
|datatables-cards=true
|datatables-paging=false
|datatables-info=false
|datatables-searching=false
}}
[[Special:Redirect/page/{{#urlget:id}}|'''Source''']]
{{#ifeq: {{#urlget:show}} | |
  == {{#switch: 
    {{#if: {{#urlget:month}} | {{#urlget:month}} | {{CURRENTMONTH}} }}
    | 1 = January
    | 2 = February
    | 3 = March
    | 4 = April
    | 5 = May
    | 6 = June
    | 7 = July
    | 8 = August
    | 9 = September
    | 10 = October
    | 11 = November
    | 12 = December
  }} {{#if: {{#urlget:year}} | {{#urlget:year}} | {{CURRENTYEAR}} }} ==

}}
{{#ifeq:{{#urlget:show}}|all|
  {{#visualdataquery: [[conversationHash::{{#urlget:hash}}]]
    |schema=ContactManager/Message
    |?headers/from
    |?headers/to
    |?headers/subject
    |?parsedDate
    |?regularAttachments
    |?visibleText
    |template=ContactManager/Conversation
    |values-separator=@@
    |format=template
    |order=parsedDate asc
    |limit = 100
    |offset = {{#if: {{#urlget:offset}} | {{#urlget:offset}} | 0 }}
  }}

<big>{{#invoke:ContactManager/ConversationsNavigationBottom|fn
   | mailbox={{#urlget:mailbox}}
   | month={{#urlget:month}}
   | year={{#urlget:year}}
   | hash={{#urlget:hash}}
   | show={{#urlget:show}}
   | offset={{#urlget:offset}}
   | count= {{#visualdataquery: [[conversationHash::{{#urlget:hash}}]]
     |schema=ContactManager/Message
     |format=count
   }}
  }}</big>

|
  {{#visualdataquery: [[conversationHash::{{#urlget:hash}}]]
    [[parsedDate::>{{#if: {{#urlget:year}}|{{#urlget:year}}|{{CURRENTYEAR}} }}-{{#if: {{#urlget:month}}|{{#urlget:month}}|{{CURRENTMONTH}} }}-01]]
    [[parsedDate::<{{#expr:{{#if: {{#urlget:year}}|{{#urlget:year}}|{{CURRENTYEAR}} }}{{#ifeq:{{#if: {{#urlget:month}}|{{#urlget:month}}|{{CURRENTMONTH}} }}|12|+1|+0}} }}-{{padleft:{{#expr:{{#if: {{#urlget:month}}|{{#urlget:month}}|{{CURRENTMONTH}} }}{{#ifeq:{{#if: {{#urlget:month}}|{{#urlget:month}}|{{CURRENTMONTH}} }}|12|-11|+1}} }} |2|0}}-01]]
    |schema=ContactManager/Message
    |?headers/from
    |?headers/to
    |?headers/subject
    |?parsedDate
    |?regularAttachments
    |?visibleText
    |template=ContactManager/Conversation
    |values-separator=@@
    |format=template
    |order=parsedDate asc
    |limit = 100
    |offset = {{#if: {{#urlget:offset}} | {{#urlget:offset}} | 0 }}
  }}

<big>{{#invoke:ContactManager/ConversationsNavigationBottom|fn
   | mailbox={{#urlget:mailbox}}
   | month={{#urlget:month}}
   | year={{#urlget:year}}
   | hash={{#urlget:hash}}
   | show={{#urlget:show}}
   | offset={{#urlget:offset}}
   | count= {{#visualdataquery: [[conversationHash::{{#urlget:hash}}]]
    [[parsedDate::>{{#if: {{#urlget:year}}|{{#urlget:year}}|{{CURRENTYEAR}} }}-{{#if: {{#urlget:month}}|{{#urlget:month}}|{{CURRENTMONTH}} }}-01]]
    [[parsedDate::<{{#expr:{{#if: {{#urlget:year}}|{{#urlget:year}}|{{CURRENTYEAR}} }}{{#ifeq:{{#if: {{#urlget:month}}|{{#urlget:month}}|{{CURRENTMONTH}} }}|12|+1|+0}} }}-{{padleft:{{#expr:{{#if: {{#urlget:month}}|{{#urlget:month}}|{{CURRENTMONTH}} }}{{#ifeq:{{#if: {{#urlget:month}}|{{#urlget:month}}|{{CURRENTMONTH}} }}|12|-11|+1}} }} |2|0}}-01]]
    |schema=ContactManager/Message
    |format=count
  }}
  }}</big>
}}
